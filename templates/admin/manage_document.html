{% extends 'base.html' %}

{% block title %}MSU Enrollment Assistant - Manage Document{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-12">
        <h2 class="border-bottom pb-2">Manage Document</h2>
    </div>
</div>

<div class="card">
    <div class="card-header bg-light">
        <h5 class="mb-0">{{ document.original_filename }}</h5>
    </div>
    <div class="card-body">
        <form method="POST" action="{{ url_for('admin.update_document', document_id=document.id) }}">
            <div class="mb-3">
                <label for="description" class="form-label">Description</label>
                <textarea class="form-control" id="description" name="description" rows="3">{{ document.description or '' }}</textarea>
                <span data-i18n="welcome_message">欢迎使用马来西亚管理科技大学(MSU) 24/7入学顾问！我可以帮助您解答关于课程、费用、要求和申请流程的任何问题。作为顾问和向导，我可以根据您的兴趣和目标推荐合适的课程。今天我能为您提供什么帮助？</span>
            </div>
            <div class="mb-3">
                <label for="category" class="form-label">Category</label>
                <select class="form-select" id="category" name="category">
                    <option value="Programs" {% if document.category == 'Programs' %}selected{% endif %}>Programs</option>
                    <option value="Admissions" {% if document.category == 'Admissions' %}selected{% endif %}>Admissions</option>
                    <option value="Fees" {% if document.category == 'Fees' %}selected{% endif %}>Fees</option>
                    <option value="Other" {% if document.category == 'Other' %}selected{% endif %}>Other</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="language" class="form-label">Language</label>
                <select class="form-select" id="language" name="language">
                    <option value="en" {% if document.language == 'en' %}selected{% endif %}>English</option>
                    <option value="ms" {% if document.language == 'ms' %}selected{% endif %}>Bahasa Malaysia</option>
                    <option value="zh" {% if document.language == 'zh' %}selected{% endif %}>Chinese</option>
                    <option value="es" {% if document.language == 'es' %}selected{% endif %}>Spanish</option>
                </select>
            </div>
            <div class="mb-3">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="is_active" name="is_active" {% if document.is_active %}checked{% endif %}>
                    <label class="form-check-label" for="is_active">Active</label>
                </div>
            </div>
            <div class="d-flex justify-content-between">
                <button type="submit" class="btn btn-primary">Save Changes</button>
                <a href="{{ url_for('admin.documents') }}" class="btn btn-outline-secondary">Back to Documents</a>
            </div>
        </form>
    </div>
</div>

<!-- Document Preview -->
<div class="card mt-4">
    <div class="card-header bg-light">
        <h5 class="mb-0">Document Preview</h5>
    </div>
    <div class="card-body">
        <div class="ratio ratio-16x9">
            <iframe src="{{ url_for('admin.view_document', filename=document.filename) }}" title="Document Preview"></iframe>
        </div>
    </div>
</div>
{% endblock %}
